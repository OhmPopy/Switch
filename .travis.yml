language: cpp

matrix:
  include:
    - os: linux
      compiler: clang-3.9
      dist: trusty
    - os: osx
      osx_image: xcode9.1

addons:
  apt:
    sources:
      - llvm-toolchain-xenial-3.9
      - ubuntu-toolchain-r-test
    packages:
      - g++-6
      - gcc-6
      - clang-3.9
      - lldb-3.9
      - libgtkmm-3.0-dev
      - uuid-dev

script:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then export SWITCH_OPTIONS="-DBUILD_SWITCH_SYSTEM_DRAWING=OFF -DBUILD_SWITCH_SYSTEM_WINDOWS_FORMS=OFF"; fi
  - cmake .. -DCMAKE_BUILD_TYPE=Release -DBUILD_SWITCH_TESTS=ON $SWITCH_OPTIONS 
  - cmake --build . -- -j8
  - ctest --output-on-failure --build-config Release
